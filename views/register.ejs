<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/register.css">
    <title>Document</title>
  </head>
  

  <body>
    <div id="register">
      <p class="para">Register</p>
      <hr class="line" />
      <form action="http://localhost:2345/auth/register" method="post">
        <input type="text" placeholder="First Name*" id="firstname" />
        <br /><br />
        <input type="text" placeholder="Last Name*" id="lastname" />
        <br /><br />
        <input type="text" placeholder="Email Address*" id="email" />
        <br /><br />
        <input type="text" placeholder="Password*" id="password" />
        <br /><br />
        <input
          type="text"
          placeholder="Confirm Password*"
          id="confirmpassword"
        />
        <br /><br />
        <input type="Number" placeholder="Mobile No*" id="mobile" />
      </form>
      <br /><br />
      <button>Register</button>
      <div id="char">
        <p>Already Registered?</p>
        <p class="login">Login</p>
      </div>
    </div>
  </body>
</html>
<script>
  document.querySelector("button").addEventListener("click", register);
  async function register() {
    
    var firstname = document.querySelector("#firstname").value;
    var lastname = document.querySelector("#lastname").value;
    var email = document.querySelector("#email").value;
    var password = document.querySelector("#password").value;
    var confirmpassword = document.querySelector("#confirmpassword").value;
    var mobile = document.querySelector("#mobile").value;
    if(password!==confirmpassword){
        alert("Please type the same password");
        return;
    }

    var usercred = {
      firstname: firstname,
      lastname: lastname,
      email: email,
      password: password,
      phone: mobile,
    };
    console.log(usercred);
    try{
        let response = await fetch("http://localhost:2345/auth/register",{
            method:"POST",
            body: JSON.stringify(usercred),
            headers: {
                "Content-Type":"application/json"
            }
        })
        window.location.href = "/auth/login";

    }
    catch(er){
        console.log(er)
    }
  }
</script>
